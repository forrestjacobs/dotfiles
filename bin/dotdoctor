#!/usr/bin/env bash

# dependencies

if command -v brew &> /dev/null; then
  if ! brew bundle --file ~/.config/Brewfile check > /dev/null; then
    echo 'Warning: Not all dependencies are installed. Run:'
    echo '  brew bundle --file ~/.config/Brewfile'
    echo
  fi
else
  echo 'Warning: Unable to test dependencies. For macos, install Homebrew at https://brew.sh and then run dotdoctor again.'
  echo
fi

# fish

if test $(basename "$SHELL") != "fish"; then
  echo 'Warning: Your shell is not fish. Add fish to /etc/shells and then:'
  echo '  chsh -s /path/to/fish'
  echo
fi

# git

if test $(git config --global include.path) != '~/.config/git/main.inc'; then
  echo 'Warning: Not sourcing git config. Run:'
  echo "  git config --global include.path '~/.config/git/main.inc'"
  echo
fi

if ! git config --global user.name > /dev/null; then
  echo 'Warning: Git name not set. Run:'
  echo "  git config --global user.name 'Forrest Jacobs'"
  echo
fi

if ! git config --global user.email > /dev/null; then
  echo 'Warning: Git email not set. Run:'
  echo "  git config --global user.email 'forrestjacobs@gmail.com'"
  echo
fi
